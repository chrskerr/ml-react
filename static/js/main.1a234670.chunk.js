(this["webpackJsonpml-react"]=this["webpackJsonpml-react"]||[]).push([[0],{195:function(e,t,a){e.exports=a(393)},200:function(e,t,a){},393:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(61),c=a.n(i),l=(a(200),a(68)),o=a(95),u=a(150),s=a.n(u),m=a(66),d=a(151),p=a(165),f=a(12),v=a.n(f),E=a(97),b=a.n(E),h=a(24);function g(){var e=Object(o.a)(["\nquery GetPredictions ( $version: Int! ) {\n    predictions ( where: { prediction: { _is_null: false }, actual: { _is_null: false }, _version: { _eq: $version }}) {\n        actual id time\n        instrument\n        prediction\n        _version\n    }\n}"]);return g=function(){return e},e}function y(){var e=Object(o.a)(["\nquery GetVersions {\n    versions { id }\n}\n"]);return y=function(){return e},e}var O=b()(y()),j=b()(g());function k(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],i=t[1],c=Object(n.useState)(!1),o=Object(l.a)(c,2),u=o[0],s=o[1],f=Object(m.b)(O).data,E=Object(m.a)(j),b=Object(l.a)(E,2),h=b[0],g=b[1],y=g.data,k=g.loading;Object(n.useEffect)((function(){return h({variables:{version:u}})}),[u]);var w=v.a.get(y,"predictions"),_=v.a.filter(w,["_version",u]),N=v.a.map(v.a.get(f,"versions"),"id");Object(n.useEffect)((function(){u||s(Math.max(N))}),[N]);var S=v.a.uniq(v.a.map(_,"instrument"));Object(n.useEffect)((function(){a||i(v.a.first(S))}),[S]);var M=v.a.filter(_,["instrument",a]);return r.a.createElement("div",{className:"body"},r.a.createElement("div",{className:"header"},r.a.createElement("h2",null,"Visualisation and Stats analysis of my ML model"),r.a.createElement("p",null,"All predictions pulled for my model, visualised and analysed.")),r.a.createElement("div",{className:"options"},r.a.createElement("div",null,r.a.createElement("p",null,"Select Version:"),r.a.createElement("select",{value:u,onChange:function(e){return s(e.target.value)}},!v.a.isEmpty(N)&&v.a.map(N,(function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("div",null,r.a.createElement("p",null,"Select Instruments:"),r.a.createElement("select",{value:a,onChange:function(e){return i(e.target.value)}},!v.a.isEmpty(S)&&v.a.map(S,(function(e){return r.a.createElement("option",{key:e,value:e},e)}))))),k&&r.a.createElement("div",{className:"loader"},r.a.createElement(d.a,{icon:p.a,spin:!0,size:"3x"})),!k&&!v.a.isEmpty(M)&&r.a.createElement("div",{className:"chart"},r.a.createElement(q,{data:M})),!k&&v.a.isEmpty(M)&&r.a.createElement("p",null,"Nothing to display - change a filter!"))}var q=Object(n.memo)((function(e){var t=e.data,a=v.a.map(t,(function(e){return{actual:100*e.actual,prediction:100*e.prediction}})),n=v.a.reduce(a,(function(e,t){var a=Math.abs(v.a.get(t,"actual")),n=Math.abs(v.a.get(t,"prediction"));return a>n&&a>e?a>e?a:e:n>a&&n>e?n>e?n:e:void 0}),-1/0),i=[-1*n,n];return r.a.createElement(h.c,null,r.a.createElement(h.e,{margin:{top:20,bottom:20}},r.a.createElement(h.a,null),r.a.createElement(h.g,{type:"number",dataKey:"actual",name:"actual",domain:i,label:{value:"Actual Change (cents)",position:"bottom",offset:0}}),r.a.createElement(h.h,{type:"number",dataKey:"prediction",name:"prediction",domain:i,label:{value:"Predicted Change (cents)",position:"centerBottom",angle:90,offset:5},orientation:"right"}),r.a.createElement(h.f,{cursor:{strokeDasharray:"3 3"}}),r.a.createElement(h.d,{name:"A school",data:a,fill:"#f9bc60"}),r.a.createElement(h.b,{x:"actual",y:"prediction"})))}),v.a.isEqual);q.proptypes={data:s.a.array};var w=a(16),_=a(28),N=a(168),S=a(166),M=a(17),x=a(3),C=a(167);function A(){var e=new S.a({uri:"https://boiling-ridge-24261.herokuapp.com/v1/graphql"}),t=new N.a({uri:"wss://boiling-ridge-24261.herokuapp.com/v1/graphql",options:{reconnect:!0,timeout:3e4}}),a=Object(M.d)((function(e){var t=e.query,a=Object(x.l)(t),n=a.kind,r=a.operation;return"OperationDefinition"===n&&"subscription"===r}),t,e),n=new _.c({link:a,cache:new C.a});return r.a.createElement(w.a,{client:n},r.a.createElement(k,null))}c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(A,null)),document.getElementById("root"))}},[[195,1,2]]]);
//# sourceMappingURL=main.1a234670.chunk.js.map