(this["webpackJsonpml-react"]=this["webpackJsonpml-react"]||[]).push([[0],{195:function(e,t,a){e.exports=a(393)},200:function(e,t,a){},393:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(61),l=a.n(i),c=(a(200),a(98)),o=a(148),u=a(149),s=a.n(u),m=a(91),p=a(150),d=a(165),E=a(12),f=a.n(E),v=a(151),b=a.n(v),h=a(24);function g(){var e=Object(o.a)(["\nsubscription SubcribeVersions {\n    predictions ( where: { prediction: { _is_null: false }, actual: { _is_null: false }}) {\n        actual id time\n        instrument\n        prediction\n        _version\n    }\n}"]);return g=function(){return e},e}var y=b()(g());function O(){var e=Object(m.a)(y),t=e.data,a=e.loading,i=Object(n.useState)(!1),l=Object(c.a)(i,2),o=l[0],u=l[1],s=Object(n.useState)(!1),E=Object(c.a)(s,2),v=E[0],b=E[1],h=f.a.get(t,"predictions"),g=f.a.filter(h,["_version",v]),O=f.a.uniq(f.a.map(h,"_version"));Object(n.useEffect)((function(){v||b(Math.max(O))}),[O]);var k=f.a.uniq(f.a.map(g,"instrument"));Object(n.useEffect)((function(){o||u(f.a.first(k))}),[k]);var w=f.a.filter(g,["instrument",o]);return r.a.createElement("div",{className:"body"},r.a.createElement("div",{className:"header"},r.a.createElement("h2",null,"Visualisation and Stats analysis of my ML model"),r.a.createElement("p",null,"All predictions pulled for my model, visualised and analysed.")),r.a.createElement("div",{className:"options"},r.a.createElement("div",null,r.a.createElement("p",null,"Select Version:"),r.a.createElement("select",{value:v,onChange:function(e){return b(e.target.value)}},!f.a.isEmpty(O)&&f.a.map(O,(function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("div",null,r.a.createElement("p",null,"Select Instruments:"),r.a.createElement("select",{value:o,onChange:function(e){return u(e.target.value)}},!f.a.isEmpty(k)&&f.a.map(k,(function(e){return r.a.createElement("option",{key:e,value:e},e)}))))),a&&r.a.createElement("div",{className:"loader"},r.a.createElement(p.a,{icon:d.a,spin:!0,size:"3x"})),!a&&!f.a.isEmpty(w)&&r.a.createElement("div",{className:"chart"},r.a.createElement(j,{data:w})),!a&&f.a.isEmpty(w)&&r.a.createElement("p",null,"Nothing to display - change a filter!"))}var j=Object(n.memo)((function(e){var t=e.data,a=f.a.map(t,(function(e){return{actual:100*e.actual,prediction:100*e.prediction}})),n=f.a.reduce(a,(function(e,t){var a=Math.abs(f.a.get(t,"actual")),n=Math.abs(f.a.get(t,"prediction"));return a>n&&a>e?a>e?a:e:n>a&&n>e?n>e?n:e:void 0}),-1/0),i=[-1*n,n];return r.a.createElement(h.c,null,r.a.createElement(h.e,{margin:{top:20,bottom:20}},r.a.createElement(h.a,null),r.a.createElement(h.g,{type:"number",dataKey:"actual",name:"actual",domain:i,label:{value:"Actual Change (cents)",position:"bottom",offset:0}}),r.a.createElement(h.h,{type:"number",dataKey:"prediction",name:"prediction",domain:i,label:{value:"Predicted Change (cents)",position:"centerBottom",angle:90,offset:5},orientation:"right"}),r.a.createElement(h.f,{cursor:{strokeDasharray:"3 3"}}),r.a.createElement(h.d,{name:"A school",data:a,fill:"#f9bc60"}),r.a.createElement(h.b,{x:"actual",y:"prediction"})))}),f.a.isEqual);j.proptypes={data:s.a.array};var k=a(16),w=a(28),S=a(168),_=a(166),q=a(17),N=a(3),M=a(167);function x(){var e=new _.a({uri:"https://boiling-ridge-24261.herokuapp.com/v1/graphql"}),t=new S.a({uri:"wss://boiling-ridge-24261.herokuapp.com/v1/graphql",options:{reconnect:!0,timeout:3e4}}),a=Object(q.d)((function(e){var t=e.query,a=Object(N.l)(t),n=a.kind,r=a.operation;return"OperationDefinition"===n&&"subscription"===r}),t,e),n=new w.c({link:a,cache:new M.a});return r.a.createElement(k.a,{client:n},r.a.createElement(O,null))}l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(x,null)),document.getElementById("root"))}},[[195,1,2]]]);
//# sourceMappingURL=main.b1adf758.chunk.js.map