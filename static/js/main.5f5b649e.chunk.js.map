{"version":3,"sources":["Home.js","App.js","webpack:///./src/index.js?b635"],"names":["GET_VERSIONS","gql","GET_PREDICTIONS","Home","useState","instrument","setInstrument","version","setVersion","includeBackPredicted","setIncludeBackPredicted","versionsData","useQuery","data","useLazyQuery","getPredictions","loading","useEffect","variables","was_back_predicted","predictions","_","get","versions","map","isEmpty","max","instruments","uniq","first","filteredPredictions","filter","className","value","onChange","e","target","key","onClick","icon","faCheck","faTimes","faSpinner","spin","size","DotChart","memo","graphData","actual","prediction","Number","toFixed","z","regressionData","largestVal","reduce","total","current","Math","abs","Infinity","domain","ceil","regressionLineFunc","linearRegressionLine","linearRegression","regressionLine","actualsStDev","standardDeviation","negActualsStDev","margin","top","bottom","type","dataKey","name","label","position","offset","angle","range","cursor","strokeDasharray","fill","shape","line","stroke","strokeWidth","x","y","isEqual","DistributionChart","variations","min","intervalLength","start","numberOfIntervals","i","middle","matchedVariations","variation","left","dot","Stats","sampleCount","upwardSamples","downwardSamples","flatSamples","upwardCorrect","downwardsCorrect","flatCorrect","percUpwardCorrect","percDownwardsCorrect","percFlatCorrect","sampleMean","mean","sampleStandardDev","App","client","ApolloClient","uri","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5f5b649e.chunk.js","sourcesContent":["\nimport React, { memo, useEffect, useState } from \"react\";\nimport PropTypes from \"proptypes\";\nimport { useQuery, useLazyQuery } from \"@apollo/react-hooks\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSpinner , faCheck, faTimes } from \"@fortawesome/free-solid-svg-icons\";\nimport _ from \"lodash\";\nimport gql from \"graphql-tag\";\nimport { ResponsiveContainer, ScatterChart, Scatter, XAxis, YAxis, ZAxis, CartesianGrid, Tooltip, ComposedChart, Line, ReferenceLine } from \"recharts\";\nimport { linearRegression, linearRegressionLine, min, max, mean, standardDeviation } from \"simple-statistics\";\n\nconst GET_VERSIONS = gql`\nquery GetVersions {\n    versions { id }\n}\n`;\n\nconst GET_PREDICTIONS = gql`\nquery GetPredictions ( $version: Int!, $was_back_predicted: [Boolean!] ) {\n    predictions ( where: { prediction: { _is_null: false }, actual: { _is_null: false }, _version: { _eq: $version }, was_back_predicted: { _in: $was_back_predicted }}) {\n        actual id time\n        instrument\n        prediction\n        _version\n    }\n}`;\n\nexport default function Home () {\n\tconst [ instrument, setInstrument ] = useState( false );\n\tconst [ version, setVersion ] = useState( -1 );\n\tconst [ includeBackPredicted, setIncludeBackPredicted ] = useState( true );\n    \n\tconst { data: versionsData } = useQuery( GET_VERSIONS );\n\tconst [ getPredictions, { data, loading }] = useLazyQuery( GET_PREDICTIONS );\n\t// eslint-disable-next-line\n\tuseEffect(() => getPredictions({ variables: { version, was_back_predicted: includeBackPredicted ? [ true, false ] : [ false ] }}), [ version, includeBackPredicted ]);\n\n\tconst predictions = _.get( data, \"predictions\" );\n\n\tconst versions = _.map( _.get( versionsData, \"versions\" ), \"id\" );\n\t// eslint-disable-next-line\n\tuseEffect(() => { if ( version === -1 && !_.isEmpty( versions )) setVersion( max( versions )); }, [ versions ]);\n\n\tconst instruments = _.uniq( _.map( predictions, \"instrument\" ));\n\t// eslint-disable-next-line\n\tuseEffect(() => { if ( !instrument ) setInstrument( _.first( instruments ));}, [ instruments ]);\n    \n\tconst filteredPredictions = _.filter( predictions, [ \"instrument\", instrument ]);\n    \n\treturn (\n\t\t<div className=\"body\">\n\t\t\t<div className=\"header\">\n\t\t\t\t<h1>Visualisation and Stats analysis of my ML model</h1>\n\t\t\t\t<p>All predictions pulled for my model, visualised and analysed.</p>\n\t\t\t</div>\n\n\t\t\t<div className=\"options\">\n\t\t\t\t<div>\n\t\t\t\t\t<p>Select Version:</p>\n\t\t\t\t\t<select value={ version } onChange={ e => setVersion( e.target.value )}>\n\t\t\t\t\t\t{ !_.isEmpty( versions ) && _.map( versions, version => <option key={ version } value={ version }>{ version }</option> ) }\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<p>Select Instruments:</p>\n\t\t\t\t\t<select value={ instrument } onChange={ e => setInstrument( e.target.value )}>\n\t\t\t\t\t\t{ !_.isEmpty( instruments ) && _.map( instruments, instrument => <option key={ instrument } value={ instrument }>{ instrument }</option> ) }\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t\t<div onClick={ () => setIncludeBackPredicted( !includeBackPredicted ) }>\n\t\t\t\t\t<p>Include back-predicted results</p>\n\t\t\t\t\t{ includeBackPredicted ? <FontAwesomeIcon icon={ faCheck } /> : <FontAwesomeIcon icon={ faTimes } className=\"unchecked\" /> }\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{ ( loading || !version ) ? \n\t\t\t\t<div className=\"loader\">\n\t\t\t\t\t<FontAwesomeIcon icon={ faSpinner } spin size=\"3x\" />\n\t\t\t\t</div>\n\t\t\t\t:\n\t\t\t\t<>{ !_.isEmpty( filteredPredictions ) ?\n\t\t\t\t\t<div className=\"chart\">\n\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t<div className=\"stats\">\n\t\t\t\t\t\t\t<Stats data={ filteredPredictions } />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t<div className=\"scatter\">\n\t\t\t\t\t\t\t<DotChart data={ filteredPredictions } />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t<div className=\"distribution\">\n\t\t\t\t\t\t\t<DistributionChart data={ filteredPredictions } />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div> \n\t\t\t\t\t:\n\t\t\t\t\t<p>Nothing to display - change a filter!</p>\n\t\t\t\t}</>\n\t\t\t}\n\t\t</div>\n\t);\n}\n\nconst DotChart = memo( function DotChart ({ data }) {\n\tconst graphData = _.map( data, ({ actual, prediction }) => ({ actual: Number(( actual * 100 ).toFixed( 4 )), prediction: Number(( prediction * 100 ).toFixed( 4 )), z: 1 }));\n\tconst regressionData = _.map( data, ({ actual, prediction }) => ([ actual * 100, prediction * 100 ]));\n\n\tconst largestVal = _.reduce( graphData, ( total, current ) => {\n\t\tconst actual = Math.abs( _.get( current, \"actual\" ));\n\t\tconst prediction = Math.abs( _.get( current, \"prediction\" ));\n\t\tif ( actual > prediction ) return actual > total ? actual : total;\n\t\treturn prediction > total ? prediction: total;\n\t}, -Infinity );\n\tconst domain = [ -1 * Math.ceil( largestVal * 2 ) / 2, 1 * Math.ceil( largestVal * 2 ) / 2 ];\n\n\tconst regressionLineFunc = linearRegressionLine( linearRegression( regressionData ));\n\tconst regressionLine = [\n\t\t{ actual: domain[ 0 ], prediction: regressionLineFunc( domain[ 0 ]) },\n\t\t{ actual: domain[ 1 ], prediction: regressionLineFunc( domain[ 1 ]) },\n\t];\n    \n\tconst actualsStDev = standardDeviation( _.map( graphData, \"actual\" ));\n\tconst negActualsStDev = actualsStDev * -1;\n    \n\treturn (\n\t\t<>\n\t\t\t<h3>Predictions vs Actuals scatter</h3>\n\t\t\t<ResponsiveContainer>\n\t\t\t\t<ScatterChart margin={{ top: 20, bottom: 20 }} data={ graphData }>\n\t\t\t\t\t<CartesianGrid />\n\t\t\t\t\t<XAxis type=\"number\" dataKey=\"actual\" name=\"actual\" domain={ domain } label={{ value: \"Actual Change (cents)\", position: \"bottom\", offset: 0 }} />\n\t\t\t\t\t<YAxis type=\"number\" dataKey=\"prediction\" name=\"prediction\" domain={ domain } label={{ value: \"Predicted Change (cents)\", position: \"centerBottom\", angle: -90, offset: 5 }} />\n\t\t\t\t\t<ZAxis dataKey=\"z\" range={[ 1, 10 ]} />\n\t\t\t\t\t<Tooltip cursor={{ strokeDasharray: \"3 3\" }} />\n\t\t\t\t\t<Scatter data={ graphData } fill=\"#82ca9d\" shape=\"circle\" />\n\t\t\t\t\t<Scatter line={{ stroke: \"#e16162\", strokeWidth: 1 }} data={ regressionLine } shape=\"circle\" fill=\"#e16162\" />\n\t\t\t\t\t<ReferenceLine x={ actualsStDev } stroke=\"#C98BBE\" strokeDasharray=\"3 6\" label={{ value: \"+ σ\", position: \"insideBottomRight\" }} />\n\t\t\t\t\t<ReferenceLine x={ negActualsStDev } stroke=\"#C98BBE\" strokeDasharray=\"3 6\" label={{ value: \"- σ\", position: \"insideBottomRight\" }} />\n\t\t\t\t\t<ReferenceLine y={ actualsStDev } stroke=\"#C98BBE\" strokeDasharray=\"3 6\" label={{ value: \"+ σ\", position: \"insideTopLeft\" }} />\n\t\t\t\t\t<ReferenceLine y={ negActualsStDev } stroke=\"#C98BBE\" strokeDasharray=\"3 6\" label={{ value: \"- σ\", position: \"insideTopLeft\" }} />\n\t\t\t\t</ScatterChart>\n\t\t\t</ResponsiveContainer>\n\t\t</>\n\t);\n}, _.isEqual );\nDotChart.propTypes = {\n\tdata: PropTypes.array,\n};\n\nconst DistributionChart = memo( function DistributionChart ({ data }) {\n\tconst numberOfIntervals = 20;\n    \n\tconst variations = _.map( data, ({ actual, prediction }) => Number(( actual - prediction ).toFixed( 4 ) * 100 ));\n\tconst range = 2 * max([ 0 - min( variations ), max( variations ) ]);\n\tconst intervalLength = range / numberOfIntervals; \n    \n\tconst start = range / 2 * -1;\n\n\tconst graphData = _.map( _.range( 0, numberOfIntervals + 1 ), i => {\n\t\tconst bottom = Number(( start + intervalLength * ( i - 0.5 )).toFixed( 5 ));\n\t\tconst middle = Number(( start + intervalLength * ( i )).toFixed( 5 ));\n\t\tconst top = Number(( start + intervalLength * ( i + 0.5 )).toFixed( 5 )); \n\t\tconst matchedVariations = _.filter( variations, variation => variation > bottom && variation <= top );\n\t\treturn { name: middle, value: _.size( matchedVariations ) };\n\t});\n        \n\treturn (\n\t\t<>\n\t\t\t<h3>Variations distribution</h3>\n\t\t\t<ResponsiveContainer>\n\t\t\t\t<ComposedChart data={ graphData } margin={{ top: 20, bottom: 20, left: -25 }} >\n\t\t\t\t\t<XAxis dataKey=\"name\" />\n\t\t\t\t\t<YAxis dataKey=\"value\" />\n\t\t\t\t\t<Tooltip />\n\t\t\t\t\t<Line type=\"natural\" dataKey=\"value\" stroke=\"#82ca9d\" dot={ false } />\n\t\t\t\t\t<ReferenceLine x={ 0 } stroke=\"#C98BBE\" label={{ value: \"0\", position: \"insideBottomRight\" }} />\n\t\t\t\t</ComposedChart>\n\t\t\t</ResponsiveContainer>\n\t\t</>\n\t);\n}, _.isEqual );\nDistributionChart.propTypes = {\n\tdata: PropTypes.array,\n};\n\nconst Stats = ({ data }) => {\n\tconst sampleCount = _.size( data );\n    \n\tconst actualsStDev = standardDeviation( _.map( data, \"actual\" ));\n\tconst negActualsStDev = actualsStDev * -1;\n    \n\tconst upwardSamples = _.filter( data, ({ actual }) => actual > actualsStDev );\n\tconst downwardSamples = _.filter( data, ({ actual }) => actual < negActualsStDev );\n\tconst flatSamples = _.filter( data, ({ actual }) => actual >= negActualsStDev && actual <= actualsStDev );\n\n\tconst upwardCorrect = _.filter( upwardSamples, ({ prediction }) => prediction > actualsStDev );\n\tconst downwardsCorrect = _.filter( downwardSamples, ({ prediction }) => prediction < actualsStDev );\n\tconst flatCorrect = _.filter( flatSamples, ({ prediction }) => prediction >= negActualsStDev && prediction <= actualsStDev );\n    \n\tconst percUpwardCorrect = _.size( upwardCorrect ) / _.size( upwardSamples ) * 100;\n\tconst percDownwardsCorrect = _.size( downwardsCorrect ) / _.size( downwardSamples ) * 100;\n\tconst percFlatCorrect = _.size( flatCorrect ) / _.size( flatSamples ) * 100;\n\n\tconst variations = _.map( data, ({ actual, prediction }) => Number(( actual - prediction ).toFixed( 4 )));\n\tconst sampleMean = mean( variations );\n\tconst sampleStandardDev = standardDeviation( variations );\n\n\n\treturn (\n\t\t<>\n\t\t\t<h3>Basic Stats</h3>\n\t\t\t<table>\n\t\t\t\t<tbody>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>Number of Samples:</td>\n\t\t\t\t\t\t<td>{ sampleCount }</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>Sample mean:</td>\n\t\t\t\t\t\t<td>{ ( sampleMean ).toFixed( 5 ) * 100 }</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>Sample Standard Deviation (have not checked if curve is normal..):</td>\n\t\t\t\t\t\t<td>{ ( sampleStandardDev ).toFixed( 5 ) * 100 }</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>Percentage of samples which predicted up and were correct:</td>\n\t\t\t\t\t\t<td>{ _.size( upwardCorrect ) } / { _.size( upwardSamples ) } = { percUpwardCorrect.toFixed( 1 ) }%</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>Percentage of samples which predicted downward and were correct:</td>\n\t\t\t\t\t\t<td>{ _.size( downwardsCorrect ) } / { _.size( downwardSamples ) } = { percDownwardsCorrect.toFixed( 1 ) }%</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>Percentage of samples which predicted flat and were correct:</td>\n\t\t\t\t\t\t<td>{ _.size( flatCorrect ) } / { _.size( flatSamples ) } = { percFlatCorrect.toFixed( 1 ) }%</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</>\n\t);\n};\nStats.propTypes = {\n\tdata: PropTypes.array,\n};\n","\nimport React from \"react\";\nimport Home from \"./Home\";\nimport { ApolloProvider } from \"@apollo/react-hooks\";\nimport ApolloClient from \"apollo-boost\";\n\n\nexport default function App () {\n\tconst client = new ApolloClient({\n\t\turi: \"https://boiling-ridge-24261.herokuapp.com/v1/graphql\",\n\t});\n\n\treturn (\n\t\t<ApolloProvider client={ client }>\n\t\t\t<Home />\n\t\t</ApolloProvider>\n\t);\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.scss\";\nimport App from \"./App\";\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById( \"root\" ),\n);\n"],"sourceRoot":""}