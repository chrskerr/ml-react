(this["webpackJsonpml-react"]=this["webpackJsonpml-react"]||[]).push([[0],{189:function(e,t,a){e.exports=a(379)},194:function(e,t,a){},379:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(61),c=a.n(l),i=(a(194),a(68)),o=a(93),u=a(146),s=a.n(u),m=a(66),d=a(147),p=a(161),f=a(11),E=a.n(f),v=a(44),b=a.n(v),h=a(24);function g(){var e=Object(o.a)(["\nquery GetPredictions ( $version: Int! ) {\n    predictions ( where: { prediction: { _is_null: false }, actual: { _is_null: false }, _version: { _eq: $version }}) {\n        actual id time\n        instrument\n        prediction\n        _version\n    }\n}"]);return g=function(){return e},e}function y(){var e=Object(o.a)(["\nquery GetVersions {\n    versions { id }\n}\n"]);return y=function(){return e},e}var j=b()(y()),O=b()(g());function _(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),o=Object(i.a)(c,2),u=o[0],s=o[1],f=Object(m.b)(j).data,v=Object(m.a)(O),b=Object(i.a)(v,2),h=b[0],g=b[1],y=g.data,_=g.loading;Object(n.useEffect)((function(){return h({variables:{version:u}})}),[u]);var k=E.a.get(y,"predictions"),q=E.a.filter(k,["_version",u]),N=E.a.map(E.a.get(f,"versions"),"id");Object(n.useEffect)((function(){u||s(Math.max(N))}),[N]);var M=E.a.uniq(E.a.map(q,"instrument"));Object(n.useEffect)((function(){a||l(E.a.first(M))}),[M]);var w=E.a.filter(q,["instrument",a]);return r.a.createElement("div",{className:"body"},r.a.createElement("div",{className:"header"},r.a.createElement("h2",null,"Visualisation and Stats analysis of my ML model"),r.a.createElement("p",null,"All predictions pulled for my model, visualised and analysed.")),r.a.createElement("div",{className:"options"},r.a.createElement("div",null,r.a.createElement("p",null,"Select Version:"),r.a.createElement("select",{value:u,onChange:function(e){return s(e.target.value)}},!E.a.isEmpty(N)&&E.a.map(N,(function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("div",null,r.a.createElement("p",null,"Select Instruments:"),r.a.createElement("select",{value:a,onChange:function(e){return l(e.target.value)}},!E.a.isEmpty(M)&&E.a.map(M,(function(e){return r.a.createElement("option",{key:e,value:e},e)}))))),_&&r.a.createElement("div",{className:"loader"},r.a.createElement(d.a,{icon:p.a,spin:!0,size:"3x"})),!_&&!E.a.isEmpty(w)&&r.a.createElement("div",{className:"chart"},r.a.createElement(S,{data:w})),!_&&E.a.isEmpty(w)&&r.a.createElement("p",null,"Nothing to display - change a filter!"))}var S=Object(n.memo)((function(e){var t=e.data,a=E.a.map(t,(function(e){return{actual:100*e.actual,prediction:100*e.prediction}})),n=E.a.reduce(a,(function(e,t){var a=Math.abs(E.a.get(t,"actual")),n=Math.abs(E.a.get(t,"prediction"));return a>n&&a>e?a>e?a:e:n>a&&n>e?n>e?n:e:void 0}),-1/0),l=[-1*n,n];return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.c,null,r.a.createElement(h.e,{margin:{top:20,bottom:20}},r.a.createElement(h.a,null),r.a.createElement(h.g,{type:"number",dataKey:"actual",name:"actual",domain:l,label:{value:"Actual Change (cents)",position:"bottom",offset:0}}),r.a.createElement(h.h,{type:"number",dataKey:"prediction",name:"prediction",domain:l,label:{value:"Predicted Change (cents)",position:"centerBottom",angle:90,offset:5},orientation:"right"}),r.a.createElement(h.f,{cursor:{strokeDasharray:"3 3"}}),r.a.createElement(h.d,{name:"A school",data:a,fill:"#f9bc60"}),r.a.createElement(h.b,{x:"actual",y:"prediction"}))),r.a.createElement("a",{href:"http://recharts.org/en-US/api/ReferenceLine",target:"_blank",rel:"noreferrer noopener"},"http://recharts.org/en-US/api/ReferenceLine"))}),E.a.isEqual);S.proptypes={data:s.a.array};var k=a(16),q=a(162);function N(){var e=new q.a({uri:"https://boiling-ridge-24261.herokuapp.com/v1/graphql"});return r.a.createElement(k.a,{client:e},r.a.createElement(_,null))}c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(N,null)),document.getElementById("root"))}},[[189,1,2]]]);
//# sourceMappingURL=main.474dbfec.chunk.js.map