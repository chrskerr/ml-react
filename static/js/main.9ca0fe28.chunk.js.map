{"version":3,"sources":["Views/Absolute.js","Views/Change.js","Views/Highs.js","Home.js","App.js","webpack:///./src/index.js?b635"],"names":["Absolute","data","constants","className","DotChartPrice","memo","graphData","_","map","actual","prediction","Number","toFixed","z","largestVal","reduce","total","current","get","Infinity","domain","margin","top","bottom","right","left","type","dataKey","name","label","value","position","offset","angle","range","cursor","strokeDasharray","fill","shape","line","stroke","strokeWidth","lineType","DotChartDifference","close","posTradeThreshold","standardDeviation","negTradeThreshold","x","y","DistributionChart","variations","max","min","intervalLength","sampleMean","mean","start","numberOfIntervals","i","middle","matchedVariations","filter","variation","size","positiveStDevLineX","negativeStDevLineX","orientation","Stats","useState","threshold","setThreshold","spread","setSpread","avgRange","setAvgRange","sampleCount","differences","id","accuracy","accuracyMean","accuracyStandardDev","upAUpP","upAFlatP","upADownP","upATotal","upPTotal","flatAUpP","flatAFlatP","flatADownP","flatATotal","flatPTotal","downAUpP","downAFlatP","downADownP","downATotal","downPTotal","onChange","e","target","Change","DotChart","actualsStDev","negActualsStDev","Math","abs","ceil","console","log","actuals","actualsMean","sampleStandardDev","GET_VERSIONS","gql","GET_PREDICTIONS","constantsMap","Home","version","setVersion","includeBackPredicted","setIncludeBackPredicted","daysBack","setDaysBack","start_time","Date","toISOString","now","versionsData","useQuery","useLazyQuery","getPredictions","loading","versions","versionId","predictions","prediction_type","instrument","granularity","depth","useEffect","isEmpty","last","variables","was_back_predicted","find","key","onClick","icon","faCheck","faTimes","faSpinner","spin","App","client","ApolloClient","uri","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9ca0fe28.chunk.js","sourcesContent":["\nimport React, { memo, useState } from \"react\";\nimport PropTypes from \"proptypes\";\nimport _ from \"lodash\";\nimport { ResponsiveContainer, ScatterChart, Scatter, XAxis, YAxis, ZAxis, CartesianGrid, Tooltip, ReferenceLine } from \"recharts\";\nimport { min, max, mean, standardDeviation } from \"simple-statistics\";\n\nexport default function Absolute ({ data, constants }) {    \n\treturn (\n\t\t<div className=\"charts absolute\">\n\t\t\t<hr />\n\t\t\t<div className=\"stats\">\n\t\t\t\t<Stats data={ data } constants={ constants } />\n\t\t\t</div>\n\t\t\t<hr />\n\t\t\t<div className=\"distribution\">\n\t\t\t\t<DistributionChart data={ data } />\n\t\t\t</div>\n\t\t\t<hr />\n\t\t\t<div className=\"scatter\">\n\t\t\t\t<DotChartDifference data={ data } />\n\t\t\t</div>\n\t\t\t<hr />\n\t\t\t<div className=\"scatter\">\n\t\t\t\t<DotChartPrice data={ data } />\n\t\t\t</div>\n\t\t</div> \n\n\t);\n}\nAbsolute.propTypes = {\n\tdata: PropTypes.array,\n\tconstants: PropTypes.object,\n};\n\nconst DotChartPrice = memo( function DotChartPrice ({ data }) {\n\tconst graphData = _.map( data, ({ actual, prediction }) => ({ actual: Number(( actual ).toFixed( 4 )), prediction: Number(( prediction ).toFixed( 4 )), z: 1 }));\n\n\tconst largestVal = _.reduce( graphData, ( total, current ) => {\n\t\tconst actual = _.get( current, \"actual\" );\n\t\tconst prediction = _.get( current, \"prediction\" );\n\t\tif ( actual > prediction ) return actual > total ? actual : total;\n\t\treturn prediction > total ? prediction: total;\n\t}, -Infinity );\n\tconst smallestVal = _.reduce( graphData, ( total, current ) => {\n\t\tconst actual = _.get( current, \"actual\" );\n\t\tconst prediction = _.get( current, \"prediction\" );\n\t\tif ( actual < prediction ) return actual < total ? actual : total;\n\t\treturn prediction < total ? prediction: total;\n\t}, Infinity );\n\tconst domain =  [ smallestVal, largestVal ];\n\n\treturn (\n\t\t<>\n\t\t\t<h3>Price distribution scatter</h3>\n\t\t\t<ResponsiveContainer>\n\t\t\t\t<ScatterChart margin={{ top: 50, bottom: 20, right: 70, left: 20 }}>\n\t\t\t\t\t<CartesianGrid />\n\t\t\t\t\t<XAxis type=\"number\" dataKey=\"actual\" name=\"actual\" domain={ domain } label={{ value: \"Actual Change (cents)\", position: \"bottom\", offset: 0 }} />\n\t\t\t\t\t<YAxis type=\"number\" dataKey=\"prediction\" name=\"prediction\" domain={ domain } label={{ value: \"Predicted Change (cents)\", position: \"left\", angle: -90, offset: 0 }} />\n\t\t\t\t\t<ZAxis dataKey=\"z\" range={[ 1, 10 ]} />\n\t\t\t\t\t<Tooltip cursor={{ strokeDasharray: \"3 3\" }} />\n\t\t\t\t\t<Scatter data={ graphData } fill=\"#82ca9d\" shape=\"circle\" line={{ stroke: \"#e16162\", strokeWidth: 1 }} lineType=\"fitting\" />\n\t\t\t\t</ScatterChart>\n\t\t\t</ResponsiveContainer>\n\t\t</>\n\t);\n});\nDotChartPrice.propTypes = {\n\tdata: PropTypes.array,\n};\n\nconst DotChartDifference = memo( function DotChartDifference ({ data }) {\n\tconst graphData = _.map( data, ({ actual, prediction, close }) => ({ actual: Number(( actual - close ).toFixed( 4 )), prediction: Number(( prediction - close ).toFixed( 4 )), z: 1 }));\n\tconst posTradeThreshold = standardDeviation( _.map( graphData, \"actual\" ));\n\tconst negTradeThreshold = posTradeThreshold * -1;\n\t\n\tconst largestVal = _.reduce( graphData, ( total, current ) => {\n\t\tconst actual = _.get( current, \"actual\" );\n\t\tconst prediction = _.get( current, \"prediction\" );\n\t\tif ( actual > prediction ) return actual > total ? actual : total;\n\t\treturn prediction > total ? prediction: total;\n\t}, -Infinity );\n\tconst smallestVal = _.reduce( graphData, ( total, current ) => {\n\t\tconst actual = _.get( current, \"actual\" );\n\t\tconst prediction = _.get( current, \"prediction\" );\n\t\tif ( actual < prediction ) return actual < total ? actual : total;\n\t\treturn prediction < total ? prediction: total;\n\t}, Infinity );\n\tconst domain =  [ smallestVal, largestVal ];\n\n\treturn (\n\t\t<>\n\t\t\t<h3>Prediction difference distribution scatter</h3>\n\t\t\t<ResponsiveContainer>\n\t\t\t\t<ScatterChart margin={{ top: 50, bottom: 20, right: 70, left: 20 }}>\n\t\t\t\t\t<CartesianGrid />\n\t\t\t\t\t<XAxis type=\"number\" dataKey=\"actual\" name=\"actual\" domain={ domain } label={{ value: \"Actual Change (cents)\", position: \"bottom\", offset: 0 }} />\n\t\t\t\t\t<YAxis type=\"number\" dataKey=\"prediction\" name=\"prediction\" domain={ domain } label={{ value: \"Predicted Change (cents)\", position: \"left\", angle: -90, offset: 0 }} />\n\t\t\t\t\t<ZAxis dataKey=\"z\" range={[ 1, 10 ]} />\n\t\t\t\t\t<Tooltip cursor={{ strokeDasharray: \"3 3\" }} />\n\t\t\t\t\t<Scatter data={ graphData } fill=\"#82ca9d\" shape=\"circle\" line={{ stroke: \"#e16162\", strokeWidth: 2 }} lineType=\"fitting\" />\n\t\t\t\t\t<ReferenceLine x={ posTradeThreshold } stroke=\"#C98BBE\" strokeDasharray=\"3 6\" label={{ value: \"+ σ\", position: \"insideBottomRight\" }} />\n\t\t\t\t\t<ReferenceLine x={ negTradeThreshold } stroke=\"#C98BBE\" strokeDasharray=\"3 6\" label={{ value: \"- σ\", position: \"insideBottomRight\" }} />\n\t\t\t\t\t<ReferenceLine y={ posTradeThreshold } stroke=\"#C98BBE\" strokeDasharray=\"3 6\" label={{ value: \"+ σ\", position: \"insideTopLeft\" }} />\n\t\t\t\t\t<ReferenceLine y={ negTradeThreshold } stroke=\"#C98BBE\" strokeDasharray=\"3 6\" label={{ value: \"- σ\", position: \"insideTopLeft\" }} /> \n\t\t\t\t</ScatterChart>\n\t\t\t</ResponsiveContainer>\n\t\t</>\n\t);\n});\nDotChartDifference.propTypes = {\n\tdata: PropTypes.array,\n};\n\nconst DistributionChart = memo( function DistributionChart ({ data }) {\n\tconst numberOfIntervals = 50;\n\t\n\tconst variations = _.map( data, ({ actual, prediction }) => Number(( prediction - actual ).toFixed( 4 )));\n\tconst range = 2 * max([ 0 - min( variations ), max( variations ) ]);\n\tconst intervalLength = range / numberOfIntervals; \n\tconst sampleMean = mean( variations );\n\tconst posTradeThreshold = standardDeviation( variations );\n\tconst start = range / 2 * -1;\n\n\tconst graphData = _.map( _.range( 0, numberOfIntervals + 1 ), i => {\n\t\tconst bottom = Number(( start + intervalLength * ( i - 0.5 )).toFixed( 5 ));\n\t\tconst middle = Number(( start + intervalLength * ( i )).toFixed( 5 ));\n\t\tconst top = Number(( start + intervalLength * ( i + 0.5 )).toFixed( 5 )); \n\t\tconst matchedVariations = _.filter( variations, variation => variation > bottom && variation <= top );\n\t\treturn { name: middle, value: _.size( matchedVariations ), size: 0 };\n\t});\n\t\n\tconst positiveStDevLineX = sampleMean + posTradeThreshold;\n\tconst negativeStDevLineX = sampleMean - posTradeThreshold;\n\t\t\n\treturn (\n\t\t<>\n\t\t\t<h3>Variations distribution</h3>\n\t\t\t<ResponsiveContainer>\n\t\t\t\t<ScatterChart margin={{ top: 20, bottom: 20, left: -25 }} >\n\t\t\t\t\t<XAxis dataKey=\"name\" />\n\t\t\t\t\t<YAxis dataKey=\"value\" />\n\t\t\t\t\t<ZAxis dataKey=\"size\" range={[ 1, 10 ]} />\n\t\t\t\t\t<Tooltip cursor={{ strokeDasharray: \"3 3\" }}/>\n\t\t\t\t\t<Scatter data={ graphData } line={{ stroke: \"#82ca9d\", strokeWidth: 1 }} stroke=\"#82ca9d\" />\n\t\t\t\t\t<ReferenceLine x={ sampleMean } stroke=\"#C98BBE\" label={{ value: \"Mean\", orientation: 90, position: \"insideBottomRight\" }} />\n\t\t\t\t\t<ReferenceLine x={ positiveStDevLineX } stroke=\"#C98BBE\" label={{ value: \"+ σ\", orientation: 90, position: \"insideBottomRight\" }} />\n\t\t\t\t\t<ReferenceLine x={ negativeStDevLineX } stroke=\"#C98BBE\" label={{ value: \"- σ\", orientation: 90, position: \"insideBottomRight\" }} />\n\t\t\t\t</ScatterChart>\n\t\t\t</ResponsiveContainer>\n\t\t</>\n\t);\n});\nDistributionChart.propTypes = {\n\tdata: PropTypes.array,\n};\n\nconst Stats = memo( function Stats ({ data, constants }) {\n\tconst [ threshold, setThreshold ] = useState( 100 );\n\tconst [ spread, setSpread ] = useState( _.get( constants, \"spread\" ));\n\tconst [ avgRange, setAvgRange ] = useState( _.get( constants, \"avgRange\" ));\n\tconst sampleCount = _.size( data );\n    \t\n\tconst differences = _.map( data, ({ actual, prediction, close, id }) => ({ \n\t\tactual: Number(( actual - close ).toFixed( 5 )),\n\t\tprediction: Number(( prediction - close ).toFixed( 5 )),\n\t\taccuracy: Number(( prediction - actual ).toFixed( 5 )),\n\t\tid, close,\n\t}));\n    \n\tconst accuracy = _.map( differences, \"accuracy\" );\n\tconst accuracyMean = mean( accuracy );\n\tconst accuracyStandardDev = standardDeviation( accuracy );\n    \n\tconst posTradeThreshold = ( accuracyStandardDev * threshold / 100 )+ spread;\n\tconst negTradeThreshold = -1 * posTradeThreshold;\n\n\tconst upAUpP = _.size( _.filter( differences, ({ actual, prediction }) => actual > posTradeThreshold && prediction > posTradeThreshold ));\n\tconst upAFlatP = _.size( _.filter( differences, ({ actual, prediction }) => actual > posTradeThreshold && prediction >= negTradeThreshold && prediction <= posTradeThreshold ));\n\tconst upADownP = _.size( _.filter( differences, ({ actual, prediction }) => actual > posTradeThreshold && prediction < negTradeThreshold ));\n\tconst upATotal = _.size( _.filter( differences, ({ actual }) => actual > posTradeThreshold ));\n\tconst upPTotal = _.size( _.filter( differences, ({ prediction }) => prediction > posTradeThreshold ));\n\t\n\tconst flatAUpP = _.size( _.filter( differences, ({ actual, prediction }) => actual >= negTradeThreshold && actual <= posTradeThreshold && prediction > posTradeThreshold ));\n\tconst flatAFlatP = _.size( _.filter( differences, ({ actual, prediction }) => actual >= negTradeThreshold && actual <= posTradeThreshold && prediction >= negTradeThreshold && prediction <= posTradeThreshold ));\n\tconst flatADownP = _.size( _.filter( differences, ({ actual, prediction }) => actual >= negTradeThreshold && actual <= posTradeThreshold && prediction < negTradeThreshold ));\n\tconst flatATotal = _.size( _.filter( differences, ({ actual }) => actual >= negTradeThreshold && actual <= posTradeThreshold ));\n\tconst flatPTotal = _.size( _.filter( differences, ({ prediction }) => prediction >= negTradeThreshold && prediction <= posTradeThreshold ));\n\t\n\tconst downAUpP = _.size( _.filter( differences, ({ actual, prediction }) => actual < negTradeThreshold && prediction > posTradeThreshold ));\n\tconst downAFlatP = _.size( _.filter( differences, ({ actual, prediction }) => actual < negTradeThreshold && prediction >= negTradeThreshold && prediction <= posTradeThreshold ));\n\tconst downADownP = _.size( _.filter( differences, ({ actual, prediction }) => actual < negTradeThreshold && prediction < negTradeThreshold ));\n\tconst downATotal = _.size( _.filter( differences, ({ actual }) => actual < negTradeThreshold ));\n\tconst downPTotal = _.size( _.filter( differences, ({ prediction }) => prediction < negTradeThreshold ));\n\n\treturn (\n\t\t<>\n\t\t\t<h3>Basic Stats</h3>\n\t\t\t<table>\n\t\t\t\t<tbody>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>Number of Samples:</td>\n\t\t\t\t\t\t<td>{ sampleCount }</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>Accuracy ( Prediction minus Actual ) mean:</td>\n\t\t\t\t\t\t<td>{ ( accuracyMean ).toFixed( 5 ) }</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>Accuracy Standard Deviation:</td>\n\t\t\t\t\t\t<td>{ ( accuracyStandardDev ).toFixed( 5 ) }</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t\t<br />\n\t\t\t<div className=\"options\">\n\t\t\t\t<div>\n\t\t\t\t\t<p>Modelling true range:</p>\n\t\t\t\t\t<input type=\"number\" onChange={ e => setAvgRange( Number( e.target.value ))} value={ avgRange } min={ 0 } />\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<p>Modelling spread:</p>\n\t\t\t\t\t<input type=\"number\" onChange={ e => setSpread( Number( e.target.value ))} value={ spread } min={ 0 } />\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<p>Modelling % of accuracy Standard Deviation:</p>\n\t\t\t\t\t<input type=\"number\" onChange={ e => setThreshold( Number( e.target.value ))} value={ threshold } min={ 0 } />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<table>\n\t\t\t\t<tbody>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>Total threshold to trade:</td>\n\t\t\t\t\t\t<td>{ posTradeThreshold.toFixed( 5 ) }</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>Threshold % of True Range:</td>\n\t\t\t\t\t\t<td>{ ( posTradeThreshold / avgRange * 100 ).toFixed( 2 ) }</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t\t<br />\n\t\t\t<table className=\"comparison-table\">\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th></th>\n\t\t\t\t\t\t<th>Prediction Up</th>\n\t\t\t\t\t\t<th>Prediction Flat</th>\n\t\t\t\t\t\t<th>Prediction Down</th>\n\t\t\t\t\t\t<th>Total</th>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>Actual Up</th>\n\t\t\t\t\t\t<td>{ upAUpP } / { ( upAUpP / upPTotal * 100 ).toFixed( 1 ) }%</td>\n\t\t\t\t\t\t<td>{ upAFlatP } / { ( upAFlatP / flatPTotal * 100 ).toFixed( 1 ) }%</td>\n\t\t\t\t\t\t<td>{ upADownP } / { ( upADownP / downPTotal * 100 ).toFixed( 1 ) }%</td>\n\t\t\t\t\t\t<td>{ upATotal }</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>Actual Flat</th>\n\t\t\t\t\t\t<td>{ flatAUpP } / { ( flatAUpP / upPTotal * 100 ).toFixed( 1 ) }%</td>\n\t\t\t\t\t\t<td>{ flatAFlatP } / { ( flatAFlatP / flatPTotal * 100 ).toFixed( 1 ) }%</td>\n\t\t\t\t\t\t<td>{ flatADownP } / { ( flatADownP / downPTotal * 100 ).toFixed( 1 ) }%</td>\n\t\t\t\t\t\t<td>{ flatATotal }</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>Actual Down</th>\n\t\t\t\t\t\t<td>{ downAUpP } / { ( downAUpP / upPTotal * 100 ).toFixed( 1 ) }%</td>\n\t\t\t\t\t\t<td>{ downAFlatP } / { ( downAFlatP / flatPTotal * 100 ).toFixed( 1 ) }%</td>\n\t\t\t\t\t\t<td>{ downADownP } / { ( downADownP / downPTotal * 100 ).toFixed( 1 ) }%</td>\n\t\t\t\t\t\t<td>{ downATotal }</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>Total</th>\n\t\t\t\t\t\t<td>{ upPTotal }</td>\n\t\t\t\t\t\t<td>{ flatPTotal }</td>\n\t\t\t\t\t\t<td>{ downPTotal }</td>\n\t\t\t\t\t\t<td>{ upATotal + flatATotal + downATotal } / { upPTotal + flatPTotal + downPTotal }</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t\t<p>% are of number of predictions per the actual, so accuracy in that actual direction</p>\n\t\t</>\n\t);\n});\nStats.propTypes = {\n\tdata: PropTypes.array,\n\tconstants: PropTypes.object,\n};","\nimport React, { memo } from \"react\";\nimport PropTypes from \"proptypes\";\nimport _ from \"lodash\";\nimport { ResponsiveContainer, ScatterChart, Scatter, XAxis, YAxis, ZAxis, CartesianGrid, Tooltip, ReferenceLine } from \"recharts\";\nimport { min, max, mean, standardDeviation } from \"simple-statistics\";\n\nexport default function Change ({ data }) {    \n\treturn (\n\t\t<div className=\"charts change\">\n\t\t\t<hr />\n\t\t\t<div className=\"stats\">\n\t\t\t\t<Stats data={ data } />\n\t\t\t</div>\n\t\t\t<hr />\n\t\t\t<div className=\"distribution\">\n\t\t\t\t<DistributionChart data={ data } />\n\t\t\t</div>\n\t\t\t<hr />\n\t\t\t<div className=\"scatter\">\n\t\t\t\t<DotChart data={ data } />\n\t\t\t</div>\n\t\t</div> \n\t);\n}\nChange.propTypes = {\n\tdata: PropTypes.array,\n};\n\nconst DotChart = memo( function DotChart ({ data }) {\n\tconst graphData = _.map( data, ({ actual, prediction }) => ({ actual: Number(( actual ).toFixed( 4 ) * 100 ), prediction: Number(( prediction ).toFixed( 4 ) * 100 ), z: 1 }));\n\tconst actualsStDev = standardDeviation( _.map( graphData, \"actual\" ));\n\tconst negActualsStDev = actualsStDev * -1;\n\n\tconst largestVal = _.reduce( graphData, ( total, current ) => {\n\t\tconst actual = Math.abs( _.get( current, \"actual\" ));\n\t\tconst prediction = Math.abs( _.get( current, \"prediction\" ));\n\t\tif ( actual > prediction ) return actual > total ? actual : total;\n\t\treturn prediction > total ? prediction: total;\n\t}, -Infinity );\n\tconst domain =  [ -1 * Math.ceil( largestVal * 2 ) / 2, 1 * Math.ceil( largestVal * 2 ) / 2 ];\n\n\treturn (\n\t\t<>\n\t\t\t<h3>Predictions vs Actuals scatter</h3>\n\t\t\t<ResponsiveContainer>\n\t\t\t\t<ScatterChart margin={{ top: 50, bottom: 20, right: 70, left: 20 }}>\n\t\t\t\t\t<CartesianGrid />\n\t\t\t\t\t<XAxis type=\"number\" dataKey=\"actual\" name=\"actual\" domain={ domain } label={{ value: \"Actual Change (cents)\", position: \"bottom\", offset: 0 }} />\n\t\t\t\t\t<YAxis type=\"number\" dataKey=\"prediction\" name=\"prediction\" domain={ domain } label={{ value: \"Predicted Change (cents)\", position: \"left\", angle: -90, offset: 0 }} />\n\t\t\t\t\t<ZAxis dataKey=\"z\" range={[ 1, 10 ]} />\n\t\t\t\t\t<Tooltip cursor={{ strokeDasharray: \"3 3\" }} />\n\t\t\t\t\t<Scatter data={ graphData } fill=\"#82ca9d\" shape=\"circle\" line={{ stroke: \"#e16162\", strokeWidth: 1 }} lineType=\"fitting\" />\n\t\t\t\t\t<ReferenceLine x={ actualsStDev } stroke=\"#C98BBE\" strokeDasharray=\"3 6\" label={{ value: \"+ σ\", position: \"insideBottomRight\" }} />\n\t\t\t\t\t<ReferenceLine x={ negActualsStDev } stroke=\"#C98BBE\" strokeDasharray=\"3 6\" label={{ value: \"- σ\", position: \"insideBottomRight\" }} />\n\t\t\t\t\t<ReferenceLine y={ actualsStDev } stroke=\"#C98BBE\" strokeDasharray=\"3 6\" label={{ value: \"+ σ\", position: \"insideTopLeft\" }} />\n\t\t\t\t\t<ReferenceLine y={ negActualsStDev } stroke=\"#C98BBE\" strokeDasharray=\"3 6\" label={{ value: \"- σ\", position: \"insideTopLeft\" }} /> \n\t\t\t\t</ScatterChart>\n\t\t\t</ResponsiveContainer>\n\t\t</>\n\t);\n});\nDotChart.propTypes = {\n\tdata: PropTypes.array,\n};\n\nconst DistributionChart = memo( function DistributionChart ({ data }) {\n\tconst numberOfIntervals = 50;\n    \n\tconst variations = _.map( data, ({ actual, prediction }) => Number(( actual - prediction ).toFixed( 4 ) * 100 ));\n\tconst range = 2 * max([ 0 - min( variations ), max( variations ) ]);\n\tconst intervalLength = range / numberOfIntervals; \n\tconst sampleMean = mean( variations );\n\tconst actualsStDev = standardDeviation( variations );\n\tconst start = range / 2 * -1;\n\n\tconst graphData = _.map( _.range( 0, numberOfIntervals + 1 ), i => {\n\t\tconst bottom = Number(( start + intervalLength * ( i - 0.5 )).toFixed( 5 ));\n\t\tconst middle = Number(( start + intervalLength * ( i )).toFixed( 5 ));\n\t\tconst top = Number(( start + intervalLength * ( i + 0.5 )).toFixed( 5 )); \n\t\tconst matchedVariations = _.filter( variations, variation => variation > bottom && variation <= top );\n\t\treturn { name: middle, value: _.size( matchedVariations ), size: 0 };\n\t});\n    \n\tconst positiveStDevLineX = sampleMean + actualsStDev;\n\tconst negativeStDevLineX = sampleMean - actualsStDev;\n\tconsole.log( negativeStDevLineX, positiveStDevLineX );\n        \n\treturn (\n\t\t<>\n\t\t\t<h3>Variations distribution</h3>\n\t\t\t<ResponsiveContainer>\n\t\t\t\t<ScatterChart margin={{ top: 20, bottom: 20, left: -25 }} >\n\t\t\t\t\t<XAxis dataKey=\"name\" />\n\t\t\t\t\t<YAxis dataKey=\"value\" />\n\t\t\t\t\t<ZAxis dataKey=\"size\" range={[ 1, 10 ]} />\n\t\t\t\t\t<Tooltip cursor={{ strokeDasharray: \"3 3\" }}/>\n\t\t\t\t\t<Scatter data={ graphData } line={{ stroke: \"#82ca9d\", strokeWidth: 1 }} stroke=\"#82ca9d\" />\n\t\t\t\t\t<ReferenceLine x={ sampleMean } stroke=\"#C98BBE\" label={{ value: \"Mean\", orientation: 90, position: \"insideBottomRight\" }} />\n\t\t\t\t\t<ReferenceLine x={ positiveStDevLineX } stroke=\"#C98BBE\" label={{ value: \"+ σ\", orientation: 90, position: \"insideBottomRight\" }} />\n\t\t\t\t\t<ReferenceLine x={ negativeStDevLineX } stroke=\"#C98BBE\" label={{ value: \"- σ\", orientation: 90, position: \"insideBottomRight\" }} />\n\t\t\t\t</ScatterChart>\n\t\t\t</ResponsiveContainer>\n\t\t</>\n\t);\n});\nDistributionChart.propTypes = {\n\tdata: PropTypes.array,\n};\n\nconst Stats = memo( function Stats ({ data }) {\n\tconst sampleCount = _.size( data );\n    \n\tconst actuals = _.map( data, \"actual\" );\n\tconst actualsMean = mean( actuals );\n\tconst actualsStDev = standardDeviation( actuals ) - actualsMean;\n\tconst negActualsStDev = actualsMean - actualsStDev;\n        \n\tconst upAUpP = _.size( _.filter( data, ({ actual, prediction }) => actual > actualsStDev && prediction > actualsStDev ));\n\tconst upAFlatP = _.size( _.filter( data, ({ actual, prediction }) => actual > actualsStDev && prediction >= negActualsStDev && prediction <= actualsStDev ));\n\tconst upADownP = _.size( _.filter( data, ({ actual, prediction }) => actual > actualsStDev && prediction < negActualsStDev ));\n\tconst upATotal = _.size( _.filter( data, ({ actual }) => actual > actualsStDev ));\n\tconst upPTotal = _.size( _.filter( data, ({ prediction }) => prediction > actualsStDev ));\n    \n\tconst flatAUpP = _.size( _.filter( data, ({ actual, prediction }) => actual >= negActualsStDev && actual <= actualsStDev && prediction > actualsStDev ));\n\tconst flatAFlatP = _.size( _.filter( data, ({ actual, prediction }) => actual >= negActualsStDev && actual <= actualsStDev && prediction >= negActualsStDev && prediction <= actualsStDev ));\n\tconst flatADownP = _.size( _.filter( data, ({ actual, prediction }) => actual >= negActualsStDev && actual <= actualsStDev && prediction < negActualsStDev ));\n\tconst flatATotal = _.size( _.filter( data, ({ actual }) => actual >= negActualsStDev && actual <= actualsStDev ));\n\tconst flatPTotal = _.size( _.filter( data, ({ prediction }) => prediction >= negActualsStDev && prediction <= actualsStDev ));\n    \n\tconst downAUpP = _.size( _.filter( data, ({ actual, prediction }) => actual < negActualsStDev && prediction > actualsStDev ));\n\tconst downAFlatP = _.size( _.filter( data, ({ actual, prediction }) => actual < negActualsStDev && prediction >= negActualsStDev && prediction <= actualsStDev ));\n\tconst downADownP = _.size( _.filter( data, ({ actual, prediction }) => actual < negActualsStDev && prediction < negActualsStDev ));\n\tconst downATotal = _.size( _.filter( data, ({ actual }) => actual < negActualsStDev ));\n\tconst downPTotal = _.size( _.filter( data, ({ prediction }) => prediction < negActualsStDev ));\n\n\tconst variations = _.map( data, ({ actual, prediction }) => Number(( actual - prediction ).toFixed( 4 )));\n\tconst sampleMean = mean( variations );\n\tconst sampleStandardDev = standardDeviation( variations );\n\n\treturn (\n\t\t<>\n\t\t\t<h3>Basic Stats</h3>\n\t\t\t<table>\n\t\t\t\t<tbody>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>Number of Samples:</td>\n\t\t\t\t\t\t<td>{ sampleCount }</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>Sample mean:</td>\n\t\t\t\t\t\t<td>{ ( sampleMean ).toFixed( 5 ) }</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>Sample Standard Deviation:</td>\n\t\t\t\t\t\t<td>{ ( sampleStandardDev ).toFixed( 5 ) }</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t\t<br />\n\t\t\t<table className=\"comparison-table\">\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th></th>\n\t\t\t\t\t\t<th>Prediction Up</th>\n\t\t\t\t\t\t<th>Prediction Flat</th>\n\t\t\t\t\t\t<th>Prediction Down</th>\n\t\t\t\t\t\t<th>Total</th>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>Actual Up</th>\n\t\t\t\t\t\t<td>{ upAUpP } / { ( upAUpP / upPTotal * 100 ).toFixed( 1 ) }%</td>\n\t\t\t\t\t\t<td>{ upAFlatP } / { ( upAFlatP / flatPTotal * 100 ).toFixed( 1 ) }%</td>\n\t\t\t\t\t\t<td>{ upADownP } / { ( upADownP / downPTotal * 100 ).toFixed( 1 ) }%</td>\n\t\t\t\t\t\t<td>{ upATotal }</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>Actual Flat</th>\n\t\t\t\t\t\t<td>{ flatAUpP } / { ( flatAUpP / upPTotal * 100 ).toFixed( 1 ) }%</td>\n\t\t\t\t\t\t<td>{ flatAFlatP } / { ( flatAFlatP / flatPTotal * 100 ).toFixed( 1 ) }%</td>\n\t\t\t\t\t\t<td>{ flatADownP } / { ( flatADownP / downPTotal * 100 ).toFixed( 1 ) }%</td>\n\t\t\t\t\t\t<td>{ flatATotal }</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>Actual Down</th>\n\t\t\t\t\t\t<td>{ downAUpP } / { ( downAUpP / upPTotal * 100 ).toFixed( 1 ) }%</td>\n\t\t\t\t\t\t<td>{ downAFlatP } / { ( downAFlatP / flatPTotal * 100 ).toFixed( 1 ) }%</td>\n\t\t\t\t\t\t<td>{ downADownP } / { ( downADownP / downPTotal * 100 ).toFixed( 1 ) }%</td>\n\t\t\t\t\t\t<td>{ downATotal }</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>Total</th>\n\t\t\t\t\t\t<td>{ upPTotal }</td>\n\t\t\t\t\t\t<td>{ flatPTotal }</td>\n\t\t\t\t\t\t<td>{ downPTotal }</td>\n\t\t\t\t\t\t<td>{ upATotal + flatATotal + downATotal } / { upPTotal + flatPTotal + downPTotal }</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t\t<p>% are of number of predictions per the actual, so accuracy in that actual direction</p>\n\t\t</>\n\t);\n});\nStats.propTypes = {\n\tdata: PropTypes.array,\n};\n","\nimport React, { memo } from \"react\";\nimport PropTypes from \"proptypes\";\nimport _ from \"lodash\";\nimport { ResponsiveContainer, ScatterChart, Scatter, XAxis, YAxis, ZAxis, CartesianGrid, Tooltip, ReferenceLine } from \"recharts\";\nimport { min, max, mean, standardDeviation } from \"simple-statistics\";\n\nexport default function Absolute ({ data }) {    \n\treturn (\n\t\t<div className=\"charts absolute\">\n\t\t\t<hr />\n\t\t\t<div className=\"stats\">\n\t\t\t\t<Stats data={ data } />\n\t\t\t</div>\n\t\t\t<hr />\n\t\t\t<div className=\"distribution\">\n\t\t\t\t<DistributionChart data={ data } />\n\t\t\t</div>\n\t\t\t<hr />\n\t\t\t<div className=\"scatter\">\n\t\t\t\t<DotChartDifference data={ data } />\n\t\t\t</div>\n\t\t\t<hr />\n\t\t\t<div className=\"scatter\">\n\t\t\t\t<DotChartPrice data={ data } />\n\t\t\t</div>\n\t\t</div> \n\n\t);\n}\nAbsolute.propTypes = {\n\tdata: PropTypes.array,\n};\n\nconst DotChartPrice = memo( function DotChartPrice ({ data }) {\n\tconst graphData = _.map( data, ({ actual, prediction }) => ({ actual: Number(( actual ).toFixed( 4 )), prediction: Number(( prediction ).toFixed( 4 )), z: 1 }));\n\n\tconst largestVal = _.reduce( graphData, ( total, current ) => {\n\t\tconst actual = _.get( current, \"actual\" );\n\t\tconst prediction = _.get( current, \"prediction\" );\n\t\tif ( actual > prediction ) return actual > total ? actual : total;\n\t\treturn prediction > total ? prediction: total;\n\t}, -Infinity );\n\tconst smallestVal = _.reduce( graphData, ( total, current ) => {\n\t\tconst actual = _.get( current, \"actual\" );\n\t\tconst prediction = _.get( current, \"prediction\" );\n\t\tif ( actual < prediction ) return actual < total ? actual : total;\n\t\treturn prediction < total ? prediction: total;\n\t}, Infinity );\n\tconst domain =  [ smallestVal, largestVal ];\n\n\treturn (\n\t\t<>\n\t\t\t<h3>Price distribution scatter</h3>\n\t\t\t<ResponsiveContainer>\n\t\t\t\t<ScatterChart margin={{ top: 50, bottom: 20, right: 70, left: 20 }}>\n\t\t\t\t\t<CartesianGrid />\n\t\t\t\t\t<XAxis type=\"number\" dataKey=\"actual\" name=\"actual\" domain={ domain } label={{ value: \"Actual Change (cents)\", position: \"bottom\", offset: 0 }} />\n\t\t\t\t\t<YAxis type=\"number\" dataKey=\"prediction\" name=\"prediction\" domain={ domain } label={{ value: \"Predicted Change (cents)\", position: \"left\", angle: -90, offset: 0 }} />\n\t\t\t\t\t<ZAxis dataKey=\"z\" range={[ 1, 10 ]} />\n\t\t\t\t\t<Tooltip cursor={{ strokeDasharray: \"3 3\" }} />\n\t\t\t\t\t<Scatter data={ graphData } fill=\"#82ca9d\" shape=\"circle\" line={{ stroke: \"#e16162\", strokeWidth: 1 }} lineType=\"fitting\" />\n\t\t\t\t</ScatterChart>\n\t\t\t</ResponsiveContainer>\n\t\t</>\n\t);\n});\nDotChartPrice.propTypes = {\n\tdata: PropTypes.array,\n};\n\nconst DotChartDifference = memo( function DotChartDifference ({ data }) {\n\tconst graphData = _.map( data, ({ actual, prediction, close }) => ({ actual: Number(( actual - close ).toFixed( 4 )), prediction: Number(( prediction - close ).toFixed( 4 )), z: 1 }));\n\tconst actualsStDev = standardDeviation( _.map( graphData, \"actual\" ));\n\tconst negActualsStDev = actualsStDev * -1;\n\t\n\tconst largestVal = _.reduce( graphData, ( total, current ) => {\n\t\tconst actual = _.get( current, \"actual\" );\n\t\tconst prediction = _.get( current, \"prediction\" );\n\t\tif ( actual > prediction ) return actual > total ? actual : total;\n\t\treturn prediction > total ? prediction: total;\n\t}, -Infinity );\n\tconst smallestVal = _.reduce( graphData, ( total, current ) => {\n\t\tconst actual = _.get( current, \"actual\" );\n\t\tconst prediction = _.get( current, \"prediction\" );\n\t\tif ( actual < prediction ) return actual < total ? actual : total;\n\t\treturn prediction < total ? prediction: total;\n\t}, Infinity );\n\tconst domain =  [ smallestVal, largestVal ];\n\n\treturn (\n\t\t<>\n\t\t\t<h3>Prediction difference distribution scatter</h3>\n\t\t\t<ResponsiveContainer>\n\t\t\t\t<ScatterChart margin={{ top: 50, bottom: 20, right: 70, left: 20 }}>\n\t\t\t\t\t<CartesianGrid />\n\t\t\t\t\t<XAxis type=\"number\" dataKey=\"actual\" name=\"actual\" domain={ domain } label={{ value: \"Actual Change (cents)\", position: \"bottom\", offset: 0 }} />\n\t\t\t\t\t<YAxis type=\"number\" dataKey=\"prediction\" name=\"prediction\" domain={ domain } label={{ value: \"Predicted Change (cents)\", position: \"left\", angle: -90, offset: 0 }} />\n\t\t\t\t\t<ZAxis dataKey=\"z\" range={[ 1, 10 ]} />\n\t\t\t\t\t<Tooltip cursor={{ strokeDasharray: \"3 3\" }} />\n\t\t\t\t\t<Scatter data={ graphData } fill=\"#82ca9d\" shape=\"circle\" line={{ stroke: \"#e16162\", strokeWidth: 2 }} lineType=\"fitting\" />\n\t\t\t\t\t<ReferenceLine x={ actualsStDev } stroke=\"#C98BBE\" strokeDasharray=\"3 6\" label={{ value: \"+ σ\", position: \"insideBottomRight\" }} />\n\t\t\t\t\t<ReferenceLine x={ negActualsStDev } stroke=\"#C98BBE\" strokeDasharray=\"3 6\" label={{ value: \"- σ\", position: \"insideBottomRight\" }} />\n\t\t\t\t\t<ReferenceLine y={ actualsStDev } stroke=\"#C98BBE\" strokeDasharray=\"3 6\" label={{ value: \"+ σ\", position: \"insideTopLeft\" }} />\n\t\t\t\t\t<ReferenceLine y={ negActualsStDev } stroke=\"#C98BBE\" strokeDasharray=\"3 6\" label={{ value: \"- σ\", position: \"insideTopLeft\" }} /> \n\t\t\t\t</ScatterChart>\n\t\t\t</ResponsiveContainer>\n\t\t</>\n\t);\n});\nDotChartDifference.propTypes = {\n\tdata: PropTypes.array,\n};\n\nconst DistributionChart = memo( function DistributionChart ({ data }) {\n\tconst numberOfIntervals = 50;\n\t\n\tconst variations = _.map( data, ({ actual, prediction }) => Number(( prediction - actual ).toFixed( 4 )));\n\tconst range = 2 * max([ 0 - min( variations ), max( variations ) ]);\n\tconst intervalLength = range / numberOfIntervals; \n\tconst sampleMean = mean( variations );\n\tconst actualsStDev = standardDeviation( variations );\n\tconst start = range / 2 * -1;\n\n\tconst graphData = _.map( _.range( 0, numberOfIntervals + 1 ), i => {\n\t\tconst bottom = Number(( start + intervalLength * ( i - 0.5 )).toFixed( 5 ));\n\t\tconst middle = Number(( start + intervalLength * ( i )).toFixed( 5 ));\n\t\tconst top = Number(( start + intervalLength * ( i + 0.5 )).toFixed( 5 )); \n\t\tconst matchedVariations = _.filter( variations, variation => variation > bottom && variation <= top );\n\t\treturn { name: middle, value: _.size( matchedVariations ), size: 0 };\n\t});\n\t\n\tconst positiveStDevLineX = sampleMean + actualsStDev;\n\tconst negativeStDevLineX = sampleMean - actualsStDev;\n\t\t\n\treturn (\n\t\t<>\n\t\t\t<h3>Variations distribution</h3>\n\t\t\t<ResponsiveContainer>\n\t\t\t\t<ScatterChart margin={{ top: 20, bottom: 20, left: -25 }} >\n\t\t\t\t\t<XAxis dataKey=\"name\" />\n\t\t\t\t\t<YAxis dataKey=\"value\" />\n\t\t\t\t\t<ZAxis dataKey=\"size\" range={[ 1, 10 ]} />\n\t\t\t\t\t<Tooltip cursor={{ strokeDasharray: \"3 3\" }}/>\n\t\t\t\t\t<Scatter data={ graphData } line={{ stroke: \"#82ca9d\", strokeWidth: 1 }} stroke=\"#82ca9d\" />\n\t\t\t\t\t<ReferenceLine x={ sampleMean } stroke=\"#C98BBE\" label={{ value: \"Mean\", orientation: 90, position: \"insideBottomRight\" }} />\n\t\t\t\t\t<ReferenceLine x={ positiveStDevLineX } stroke=\"#C98BBE\" label={{ value: \"+ σ\", orientation: 90, position: \"insideBottomRight\" }} />\n\t\t\t\t\t<ReferenceLine x={ negativeStDevLineX } stroke=\"#C98BBE\" label={{ value: \"- σ\", orientation: 90, position: \"insideBottomRight\" }} />\n\t\t\t\t</ScatterChart>\n\t\t\t</ResponsiveContainer>\n\t\t</>\n\t);\n});\nDistributionChart.propTypes = {\n\tdata: PropTypes.array,\n};\n\nconst Stats = memo( function Stats ({ data }) {\n\t// const [ threshold, setThreshold ] = useState( 100 );\n\tconst sampleCount = _.size( data );\n\t\n\tconst differences = _.map( data, ({ actual, prediction, close }) => ({ \n\t\tactual: Number(( actual - close ).toFixed( 5 )),\n\t\tprediction: Number(( prediction - close ).toFixed( 5 )),\n\t\taccuracy: Number(( prediction - actual ).toFixed( 5 )),\n\t}));\n\t\n\t// const actuals = _.map( differences, \"actual\" );\n\t// const actualStDev = standardDeviation( actuals );\n\t// const threshStDev = threshold >= 0 ? actualStDev * threshold / 100 : actualStDev;\n\t// const actualsStDev = threshStDev;\n\t// const negActualsStDev = -1 * threshStDev;\n\n\t// const upAUpP = _.size( _.filter( differences, ({ actual, prediction }) => actual > actualsStDev && prediction > actualsStDev ));\n\t// const upAFlatP = _.size( _.filter( differences, ({ actual, prediction }) => actual > actualsStDev && prediction >= negActualsStDev && prediction <= actualsStDev ));\n\t// const upADownP = _.size( _.filter( differences, ({ actual, prediction }) => actual > actualsStDev && prediction < negActualsStDev ));\n\t// const upATotal = _.size( _.filter( differences, ({ actual }) => actual > actualsStDev ));\n\t// const upPTotal = _.size( _.filter( differences, ({ prediction }) => prediction > actualsStDev ));\n\t\n\t// const flatAUpP = _.size( _.filter( differences, ({ actual, prediction }) => actual >= negActualsStDev && actual <= actualsStDev && prediction > actualsStDev ));\n\t// const flatAFlatP = _.size( _.filter( differences, ({ actual, prediction }) => actual >= negActualsStDev && actual <= actualsStDev && prediction >= negActualsStDev && prediction <= actualsStDev ));\n\t// const flatADownP = _.size( _.filter( differences, ({ actual, prediction }) => actual >= negActualsStDev && actual <= actualsStDev && prediction < negActualsStDev ));\n\t// const flatATotal = _.size( _.filter( differences, ({ actual }) => actual >= negActualsStDev && actual <= actualsStDev ));\n\t// const flatPTotal = _.size( _.filter( differences, ({ prediction }) => prediction >= negActualsStDev && prediction <= actualsStDev ));\n\t\n\t// const downAUpP = _.size( _.filter( differences, ({ actual, prediction }) => actual < negActualsStDev && prediction > actualsStDev ));\n\t// const downAFlatP = _.size( _.filter( differences, ({ actual, prediction }) => actual < negActualsStDev && prediction >= negActualsStDev && prediction <= actualsStDev ));\n\t// const downADownP = _.size( _.filter( differences, ({ actual, prediction }) => actual < negActualsStDev && prediction < negActualsStDev ));\n\t// const downATotal = _.size( _.filter( differences, ({ actual }) => actual < negActualsStDev ));\n\t// const downPTotal = _.size( _.filter( differences, ({ prediction }) => prediction < negActualsStDev ));\n\n\tconst accuracy = _.map( differences, \"accuracy\" );\n\tconst accuracyMean = mean( accuracy );\n\tconst accuracyStandardDev = standardDeviation( accuracy );\n\n\treturn (\n\t\t<>\n\t\t\t<h3>Basic Stats</h3>\n\t\t\t<table>\n\t\t\t\t<tbody>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>Number of Samples:</td>\n\t\t\t\t\t\t<td>{ sampleCount }</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>Accuracy ( Prediction minus Actual ) mean:</td>\n\t\t\t\t\t\t<td>{ ( accuracyMean ).toFixed( 5 ) }</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>Accuracy Standard Deviation:</td>\n\t\t\t\t\t\t<td>{ ( accuracyStandardDev ).toFixed( 5 ) }</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t\t{/* <br />\n\t\t\t<div className=\"options\">\n\t\t\t\t<div>\n\t\t\t\t\t<p>Set difference threshold percent:</p>\n\t\t\t\t\t<input type=\"number\" onChange={ e => setThreshold( Number( e.target.value ))} value={ threshold } min={ 0 } />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<table>\n\t\t\t\t<tbody>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>Actual minus Close - Standard Dev:</td>\n\t\t\t\t\t\t<td>{ actualStDev.toFixed( 5 ) }</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>Actual minus Close Threshold:</td>\n\t\t\t\t\t\t<td>{ threshStDev.toFixed( 5 ) }</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t\t<br />\n\t\t\t<table className=\"comparison-table\">\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th></th>\n\t\t\t\t\t\t<th>Prediction Up</th>\n\t\t\t\t\t\t<th>Prediction Flat</th>\n\t\t\t\t\t\t<th>Prediction Down</th>\n\t\t\t\t\t\t<th>Total</th>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>Actual Up</th>\n\t\t\t\t\t\t<td>{ upAUpP } / { ( upAUpP / upPTotal * 100 ).toFixed( 1 ) }%</td>\n\t\t\t\t\t\t<td>{ upAFlatP } / { ( upAFlatP / flatPTotal * 100 ).toFixed( 1 ) }%</td>\n\t\t\t\t\t\t<td>{ upADownP } / { ( upADownP / downPTotal * 100 ).toFixed( 1 ) }%</td>\n\t\t\t\t\t\t<td>{ upATotal }</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>Actual Flat</th>\n\t\t\t\t\t\t<td>{ flatAUpP } / { ( flatAUpP / upPTotal * 100 ).toFixed( 1 ) }%</td>\n\t\t\t\t\t\t<td>{ flatAFlatP } / { ( flatAFlatP / flatPTotal * 100 ).toFixed( 1 ) }%</td>\n\t\t\t\t\t\t<td>{ flatADownP } / { ( flatADownP / downPTotal * 100 ).toFixed( 1 ) }%</td>\n\t\t\t\t\t\t<td>{ flatATotal }</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>Actual Down</th>\n\t\t\t\t\t\t<td>{ downAUpP } / { ( downAUpP / upPTotal * 100 ).toFixed( 1 ) }%</td>\n\t\t\t\t\t\t<td>{ downAFlatP } / { ( downAFlatP / flatPTotal * 100 ).toFixed( 1 ) }%</td>\n\t\t\t\t\t\t<td>{ downADownP } / { ( downADownP / downPTotal * 100 ).toFixed( 1 ) }%</td>\n\t\t\t\t\t\t<td>{ downATotal }</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>Total</th>\n\t\t\t\t\t\t<td>{ upPTotal }</td>\n\t\t\t\t\t\t<td>{ flatPTotal }</td>\n\t\t\t\t\t\t<td>{ downPTotal }</td>\n\t\t\t\t\t\t<td>{ upATotal + flatATotal + downATotal } / { upPTotal + flatPTotal + downPTotal }</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t\t<p>% are of number of predictions per the actual, so accuracy in that actual direction</p> */}\n\t\t</>\n\t);\n});\nStats.propTypes = {\n\tdata: PropTypes.array,\n};\n","\nimport React, { useEffect, useState } from \"react\";\nimport { useQuery, useLazyQuery } from \"@apollo/react-hooks\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSpinner , faCheck, faTimes } from \"@fortawesome/free-solid-svg-icons\";\nimport _ from \"lodash\";\nimport gql from \"graphql-tag\";\nimport Absolute from \"./Views/Absolute\";\nimport Change from \"./Views/Change\";\nimport Highs from \"./Views/Highs\";\n\nconst GET_VERSIONS = gql`\nquery GetVersions {\n    versions ( order_by: { id: asc } ) { id prediction_type instrument depth granularity }\n}`;\n\nconst GET_PREDICTIONS = gql`\nquery GetPredictions ( $version: Int!, $was_back_predicted: [Boolean!], $start_time: timestamptz! ) {\n    predictions ( where: { \n        prediction: { _is_null: false }, \n        actual: { _is_null: false }, \n        close: { _is_null: false }, \n        _version: { _eq: $version }, \n        was_back_predicted: { _in: $was_back_predicted },\n        time: { _gte: $start_time }\n    }) {\n        actual id time\n        prediction\n        _version\n        close\n    }\n}`;\n\nconst constantsMap = {\n\t\"GBP_JPY\": {\n\t\t\"M15\": {\n\t\t\tspread: 0.015,\n\t\t\tavgRange: 0.1,\n\t\t},\n\t},\n\t\"EUR_USD\": {\n\t\tspread: 0.2,\n\t\tavgRange: 0.3,\n\t},\n};\n\nexport default function Home () {\n\tconst [ version, setVersion ] = useState({});\n\tconst [ includeBackPredicted, setIncludeBackPredicted ] = useState( true );\n\tconst [ daysBack, setDaysBack ] = useState( 0 );\n\tconst start_time = daysBack === 0 ? new Date( 0 ).toISOString() : new Date( Date.now() - ( 1000 * 60 * 60 * 24 * daysBack )).toISOString();\n    \n\tconst { data: versionsData } = useQuery( GET_VERSIONS );\n\tconst [ getPredictions, { data, loading }] = useLazyQuery( GET_PREDICTIONS );\n\n\tconst versions = _.get( versionsData, \"versions\" );\n\tconst versionId = _.get( version, \"id\" );\n\tconst predictions = _.get( data, \"predictions\" );\n\tconst prediction_type = _.get( version, \"prediction_type\" );\n\tconst instrument = _.get( version, \"instrument\" );\n\tconst granularity = _.get( version, \"granularity\" );\n\tconst depth = _.get( version, \"depth\" );\n\tconst constants = _.get( constantsMap, [ instrument, granularity ], {});\n\n\t// eslint-disable-next-line\n\tuseEffect(() => { if ( _.isEmpty( version ) && !_.isEmpty( versions )) setVersion( _.last( versions )); }, [ versions ]);\n\t// eslint-disable-next-line\n\tuseEffect(() => { if ( versionId ) getPredictions({ variables: { version: versionId, was_back_predicted: includeBackPredicted ? [ true, false ] : [ false ], start_time }}); }, [ version, includeBackPredicted, daysBack ]);\n        \n\treturn (\n\t\t<div className=\"body\">\n\t\t\t<div className=\"header\">\n\t\t\t\t<h1>Visualisation and Stats analysis of my ML model</h1>\n\t\t\t\t<p>All predictions pulled for my model, visualised and analysed.</p>\n\t\t\t</div>\n\t\t\t<div className=\"options\">\n\t\t\t\t<div>\n\t\t\t\t\t<p>Select Version:</p>\n\t\t\t\t\t<select value={ versionId } onChange={ e => setVersion( _.find( versions, [ \"id\", Number( e.target.value ) ])) }>\n\t\t\t\t\t\t{ !_.isEmpty( versions ) && _.map( versions, ({ id }) => <option key={ id } value={ id }>{ id }</option> ) }\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t\t<div onClick={ () => setIncludeBackPredicted( !includeBackPredicted ) }>\n\t\t\t\t\t<p>Include back-predicted results</p>\n\t\t\t\t\t{ includeBackPredicted ? <FontAwesomeIcon icon={ faCheck } /> : <FontAwesomeIcon icon={ faTimes } className=\"unchecked\" /> }\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<p>How many days back (0 = all)?</p>\n\t\t\t\t\t<input type=\"number\" onChange={ e => setDaysBack( Number( e.target.value ))} value={ daysBack } />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"version-info\">\n\t\t\t\t<p>Instrument: <span>{ instrument }</span></p>\n\t\t\t\t<p>Granularity: <span>{ granularity }</span></p>\n\t\t\t\t<p>Depth: <span>{ depth }</span></p>\n\t\t\t</div>\n\t\t\t<br />\n\t\t\t{ ( loading || !version ) ? \n\t\t\t\t<div className=\"loader\">\n\t\t\t\t\t<FontAwesomeIcon icon={ faSpinner } spin size=\"3x\" />\n\t\t\t\t</div>\n\t\t\t\t:\n\t\t\t\t<>\n\t\t\t\t\t{ !_.isEmpty( predictions ) ? \n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{ prediction_type === \"absolute\" && <Absolute data={ predictions } constants={ constants } /> }\n\t\t\t\t\t\t\t{ prediction_type === \"change\" && <Change data={ predictions } constants={ constants } /> }\n\t\t\t\t\t\t\t{ prediction_type === \"highs\" && <Highs data={ predictions } constants={ constants } /> }\n\t\t\t\t\t\t</>\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<p>Nothing to display - change a filter!</p>\n\t\t\t\t\t}\n\t\t\t\t</>\n\t\t\t}\n\t\t</div>\n\t);\n}\n","\nimport React from \"react\";\nimport Home from \"./Home\";\nimport { ApolloProvider } from \"@apollo/react-hooks\";\nimport ApolloClient from \"apollo-boost\";\n\n\nexport default function App () {\n\tconst client = new ApolloClient({\n\t\turi: \"https://boiling-ridge-24261.herokuapp.com/v1/graphql\",\n\t});\n\n\treturn (\n\t\t<ApolloProvider client={ client }>\n\t\t\t<Home />\n\t\t</ApolloProvider>\n\t);\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.scss\";\nimport App from \"./App\";\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById( \"root\" ),\n);\n"],"sourceRoot":""}